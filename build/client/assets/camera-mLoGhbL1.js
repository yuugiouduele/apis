import{r as q,x as L,a as x,p as r,w as T}from"./chunk-ZYFC6VSF-up4aUAKg.js";import{c as P}from"./createLucideIcon-CxbA2obt.js";import{D as O}from"./download-CXfEqW-z.js";import{P as z}from"./play-DRvFFLT-.js";var k={exports:{}},$=k.exports,E;function F(){return E||(E=1,function(R,w){(function(b,y){R.exports=y(q())})($,function(S){return function(b){var y={};function u(a){if(y[a])return y[a].exports;var d=y[a]={i:a,l:!1,exports:{}};return b[a].call(d.exports,d,d.exports,u),d.l=!0,d.exports}return u.m=b,u.c=y,u.d=function(a,d,g){u.o(a,d)||Object.defineProperty(a,d,{enumerable:!0,get:g})},u.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},u.t=function(a,d){if(d&1&&(a=u(a)),d&8||d&4&&typeof a=="object"&&a&&a.__esModule)return a;var g=Object.create(null);if(u.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:a}),d&2&&typeof a!="string")for(var j in a)u.d(g,j,(function(U){return a[U]}).bind(null,j));return g},u.n=function(a){var d=a&&a.__esModule?function(){return a.default}:function(){return a};return u.d(d,"a",d),d},u.o=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)},u.p="",u(u.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(b,y,u){u.r(y);var a=u("react"),d=function(){var c=function(o,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},c(o,e)};return function(o,e){c(o,e);function t(){this.constructor=o}o.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),g=function(){return g=Object.assign||function(c){for(var o,e=1,t=arguments.length;e<t;e++){o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(c[n]=o[n])}return c},g.apply(this,arguments)},j=function(c,o){var e={};for(var t in c)Object.prototype.hasOwnProperty.call(c,t)&&o.indexOf(t)<0&&(e[t]=c[t]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(c);n<t.length;n++)o.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(c,t[n])&&(e[t[n]]=c[t[n]]);return e};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(o){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return e?new Promise(function(t,n){e.call(navigator,o,t,n)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function U(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var C=function(c){d(o,c);function o(e){var t=c.call(this,e)||this;return t.canvas=null,t.ctx=null,t.requestUserMediaId=0,t.unmounted=!1,t.state={hasUserMedia:!1},t}return o.prototype.componentDidMount=function(){var e=this,t=e.state,n=e.props;if(this.unmounted=!1,!U()){n.onUserMediaError("getUserMedia not supported");return}t.hasUserMedia||this.requestUserMedia(),n.children&&typeof n.children!="function"&&console.warn("children must be a function")},o.prototype.componentDidUpdate=function(e){var t=this.props;if(!U()){t.onUserMediaError("getUserMedia not supported");return}var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),i=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),m=e.minScreenshotWidth!==t.minScreenshotWidth,h=e.minScreenshotHeight!==t.minScreenshotHeight;(i||m||h)&&(this.canvas=null,this.ctx=null),(n||i)&&(this.stopAndCleanup(),this.requestUserMedia())},o.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},o.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map(function(t){e.removeTrack(t),t.stop()}),e.getAudioTracks().map(function(t){e.removeTrack(t),t.stop()})):e.stop())},o.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(o.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},o.prototype.getScreenshot=function(e){var t=this,n=t.state,i=t.props;if(!n.hasUserMedia)return null;var m=this.getCanvas(e);return m&&m.toDataURL(i.screenshotFormat,i.screenshotQuality)},o.prototype.getCanvas=function(e){var t=this,n=t.state,i=t.props;if(!this.video||!n.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var m=this.video.videoWidth,h=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var f=m/h;m=i.minScreenshotWidth||this.video.clientWidth,h=m/f,i.minScreenshotHeight&&h<i.minScreenshotHeight&&(h=i.minScreenshotHeight,m=h*f)}this.canvas=document.createElement("canvas"),this.canvas.width=(e==null?void 0:e.width)||m,this.canvas.height=(e==null?void 0:e.height)||h,this.ctx=this.canvas.getContext("2d")}var v=this,p=v.ctx,l=v.canvas;return p&&l&&(l.width=(e==null?void 0:e.width)||l.width,l.height=(e==null?void 0:e.height)||l.height,i.mirrored&&(p.translate(l.width,0),p.scale(-1,1)),p.imageSmoothingEnabled=i.imageSmoothing,p.drawImage(this.video,0,0,(e==null?void 0:e.width)||l.width,(e==null?void 0:e.height)||l.height),i.mirrored&&(p.scale(-1,1),p.translate(-l.width,0))),l},o.prototype.requestUserMedia=function(){var e=this,t=this.props,n=function(h,f){var v={video:typeof f<"u"?f:!0};t.audio&&(v.audio=typeof h<"u"?h:!0),e.requestUserMediaId++;var p=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(v).then(function(l){e.unmounted||p!==e.requestUserMediaId?o.stopMediaStream(l):e.handleUserMedia(null,l)}).catch(function(l){e.handleUserMedia(l)})};if("mediaDevices"in navigator)n(t.audioConstraints,t.videoConstraints);else{var i=function(h){return{optional:[{sourceId:h}]}},m=function(h){var f=h.deviceId;return typeof f=="string"?f:Array.isArray(f)&&f.length>0?f[0]:typeof f=="object"&&f.ideal?f.ideal:null};MediaStreamTrack.getSources(function(h){var f=null,v=null;h.forEach(function(s){s.kind==="audio"?f=s.id:s.kind==="video"&&(v=s.id)});var p=m(t.audioConstraints);p&&(f=p);var l=m(t.videoConstraints);l&&(v=l),n(i(f),i(v))})}},o.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t){this.setState({hasUserMedia:!1}),n.onUserMediaError(e);return}this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},o.prototype.render=function(){var e=this,t=this,n=t.state,i=t.props,m=i.audio;i.forceScreenshotSourceSize;var h=i.disablePictureInPicture;i.onUserMedia,i.onUserMediaError,i.screenshotFormat,i.screenshotQuality,i.minScreenshotWidth,i.minScreenshotHeight,i.audioConstraints,i.videoConstraints,i.imageSmoothing;var f=i.mirrored,v=i.style,p=v===void 0?{}:v,l=i.children,s=j(i,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),M=f?g(g({},p),{transform:(p.transform||"")+" scaleX(-1)"}):p,N={getScreenshot:this.getScreenshot.bind(this)};return a.createElement(a.Fragment,null,a.createElement("video",g({autoPlay:!0,disablePictureInPicture:h,src:n.src,muted:!m,playsInline:!0,ref:function(_){e.video=_},style:M},s)),l&&l(N))},o.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},o}(a.Component);y.default=C},react:function(b,y){b.exports=S}}).default})}(k)),k.exports}var H=F();const D=L(H);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],A=P("camera",G);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],I=P("mic",J);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],W=P("mic-off",Q);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],B=P("pause",V),K=()=>{const R=x.useRef(null),w=x.useRef(null),S=x.useRef(null),[b,y]=x.useState(null),[u,a]=x.useState([]),[d,g]=x.useState(null),[j,U]=x.useState(!1),[C,c]=x.useState(!1),[o,e]=x.useState(null),[t,n]=x.useState(!1),i=x.useCallback(async()=>{try{const s=await navigator.mediaDevices.getUserMedia({audio:!0,video:{facingMode:"user"}});e(s),n(!0)}catch(s){console.error("getUserMedia error:",s),n(!1)}},[]);x.useEffect(()=>(i(),()=>{o&&o.getTracks().forEach(s=>s.stop())}),[i,o]),x.useEffect(()=>{if(o){const s={mimeType:"audio/webm"},M=new MediaRecorder(o,s);w.current=M,M.ondataavailable=N=>{N.data&&N.data.size>0&&a(_=>[..._,N.data])},M.onstop=()=>{const N=new Blob(u,{type:"audio/webm"}),_=URL.createObjectURL(N);g(_),a([])}}},[o,u]);const m=()=>{w.current&&w.current.state==="inactive"&&(w.current.start(),U(!0),a([]),g(null))},h=()=>{w.current&&w.current.state==="recording"&&(w.current.stop(),U(!1))},f=x.useCallback(()=>{var M;const s=(M=R.current)==null?void 0:M.getScreenshot();s&&y(s)},[]),v=()=>{S.current&&(C?S.current.pause():S.current.play(),c(!C))},p=()=>{if(d){const s=document.createElement("a");s.href=d,s.download=`recording_${Date.now()}.webm`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}},l=()=>{if(b){const s=document.createElement("a");s.href=b,s.download=`photo_${Date.now()}.jpg`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}};return r.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("h1",{className:"text-3xl font-bold text-center mb-8 bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",children:"React Camera & Audio Recorder"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-2xl",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[r.jsx(A,{className:"w-5 h-5"}),"Camera"]}),r.jsx("div",{className:"mb-4",children:r.jsx(D,{audio:!1,ref:R,screenshotFormat:"image/jpeg",width:400,height:300,videoConstraints:{facingMode:"user"},className:"rounded-lg border border-gray-600"})}),r.jsxs("button",{onClick:f,disabled:!t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-4 py-2 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[r.jsx(A,{className:"w-4 h-4"}),"Take Photo"]})]}),r.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-2xl",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[j?r.jsx(W,{className:"w-5 h-5 text-red-500"}):r.jsx(I,{className:"w-5 h-5"}),"Audio Recording"]}),r.jsx("div",{className:"mb-4 text-center",children:j?r.jsxs("div",{className:"text-red-500",children:[r.jsx("div",{className:"animate-pulse text-lg font-semibold",children:"â— Recording..."}),r.jsx("div",{className:"text-sm mt-2",children:"Click stop to finish recording"})]}):r.jsxs("div",{className:"text-gray-400",children:[r.jsx("div",{className:"text-lg",children:"Ready to record"}),r.jsx("div",{className:"text-sm mt-2",children:"Click start to begin recording"})]})}),r.jsx("div",{className:"space-y-3",children:j?r.jsxs("button",{onClick:h,className:"w-full bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[r.jsx(W,{className:"w-4 h-4"}),"Stop Recording"]}):r.jsxs("button",{onClick:m,disabled:!t,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-4 py-2 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[r.jsx(I,{className:"w-4 h-4"}),"Start Recording"]})})]})]}),r.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[b&&r.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-2xl",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Captured Photo"}),r.jsx("div",{className:"mb-4",children:r.jsx("img",{src:b,alt:"Captured",className:"w-full rounded-lg border border-gray-600"})}),r.jsxs("button",{onClick:l,className:"w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[r.jsx(O,{className:"w-4 h-4"}),"Download Image"]})]}),d&&r.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-2xl",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Recorded Audio"}),r.jsx("div",{className:"mb-4",children:r.jsx("audio",{ref:S,src:d,onPlay:()=>c(!0),onPause:()=>c(!1),onEnded:()=>c(!1),className:"w-full",controls:!0})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("button",{onClick:v,className:"w-full bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[C?r.jsx(B,{className:"w-4 h-4"}):r.jsx(z,{className:"w-4 h-4"}),C?"Pause":"Play"," Audio"]}),r.jsxs("button",{onClick:p,className:"w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[r.jsx(O,{className:"w-4 h-4"}),"Download Audio"]})]})]})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm ${t?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${t?"bg-green-400":"bg-red-400"}`}),t?"Camera & Microphone Ready":"Waiting for permissions..."]})})]})})};function te({}){return[{title:"New React Router App"},{name:"description",content:"Welcome to React Router!"}]}const re=T(function(){return r.jsx(K,{})});export{re as default,te as meta};
